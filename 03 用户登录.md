#用户登录

https://github.com/laracasts/flash

composer require laracasts/flash

```
'providers' => [
	...
    Laracasts\Flash\FlashServiceProvider::class,
];
```

views/layouts/app.blade.php
```
<div class="container">
    @if (session()->has('flash_notification.message'))
        <div class="alert alert-{{ session('flash_notification.level') }}">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>

            {!! session('flash_notification.message') !!}
        </div>
    @endif
</div>

<script>
    $('#flash-overlay-modal').modal();
</script>
```

app/Http/Controllers/EmailController.php
```
/**
 * @param $token
 * @return \Illuminate\Http\RedirectResponse|\Illuminate\Routing\Redirector
 */
public function verify($token)
{
    $user = User::where('confirmation_token', $token)->first();

    if(is_null($user)){
        flash('邮箱验证失败', 'danger');
        return redirect('/');
    }

    $user->is_active = 1;
    $user->confirmation_token = str_random(40);
    $user->save();
    
    Auth::login($user);
    flash('邮箱验证成功', 'success');

    return redirect('/home');
}
```

